(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{4338:(e,r,t)=>{Promise.resolve().then(t.bind(t,283))},283:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>M});var s=t(5155),n=t(6046),a=t(2115),i=t(3391),l=t(4281),d=t(6817),c=t(3339),o=t(3067),h=t(6121),g=t(9141),u=t(3667),x=t(4617),j=t.n(x),b=t(1653);let f=a.forwardRef((e,r)=>{let{bsPrefix:t,size:n,vertical:a=!1,className:i,role:l="group",as:d="div",...c}=e,o=(0,b.oU)(t,"btn-group"),h=o;return a&&(h="".concat(o,"-vertical")),(0,s.jsx)(d,{...c,ref:r,role:l,className:j()(i,h,n&&"".concat(o,"-").concat(n))})});f.displayName="ButtonGroup";var v=t(4216),p=t(5781),m=t(6472),A=t(6061),k=t(9221),S=t(2193),N=t(1205),w=t(5491),y=t(8435),E=t(8692);function M(){var e,r;let t=(0,i.wA)(),x=(0,n.useSearchParams)(),[j,b]=(0,a.useState)(!0),[p,M]=(0,a.useState)(void 0),[_,C]=(0,a.useState)(void 0),[R,P]=(0,a.useState)(void 0),[W,T]=(0,a.useState)(void 0),[B,U]=(0,a.useState)(void 0),[O,I]=(0,a.useState)([]),[F,H]=(0,a.useState)({stakesBreakdown:{},signersWeight:{}});(0,a.useEffect)(()=>{let e;let r=x.get(A.aggregatorSearchParam),s=x.get("epoch");C(r),(0,d.checkUrl)(r)?"latest"===s||Number.isInteger(Number(s))||(e="invalidEpoch"):e="invalidAggregatorUrl",void 0===e?((0,E.fetchRegistrations)(r,s).then(e=>{T(e.signing_at),P(e.registered_at),I(e.registrations),H({stakesBreakdown:(0,l.an)(e.registrations),signersWeight:(0,l.h1)(e.registrations)}),b(!1)}).catch(()=>{T(void 0),I([]),b(!1)}),(0,E.fetchEpochSettings)(r).then(e=>U(null==e?void 0:e.epoch)).catch(()=>{U(void 0)}),t((0,k.Vf)(r))):M(e)},[x]);let q=(0,a.useCallback)(e=>{let r=new URLSearchParams;return r.set("aggregator",_),r.set("epoch",e),"/registrations?".concat(r.toString())},[_]),z=q(R-1),G=q(B),J=q(R+1);if(void 0!==p){let e="";switch(p){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,s.jsxs)(c.A,{gap:3,children:[(0,s.jsx)("h2",{children:"Registrations"}),(0,s.jsxs)(o.A,{variant:"danger",children:[(0,s.jsx)(o.A.Heading,{children:"Oh snap! You got an error!"}),(0,s.jsx)("p",{children:e})]})]})}return(0,s.jsxs)(c.A,{gap:3,children:[(0,s.jsxs)("h2",{children:["Registrations"," ",(0,s.jsx)(w.A,{href:"".concat(_,"/signers/registered/").concat(R),variant:"outline-light",size:"sm"})]}),(0,s.jsx)(h.A,{children:(0,s.jsx)(g.A,{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Aggregator:"})}),(0,s.jsx)("td",{children:_})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Registration epoch:"})}),(0,s.jsx)("td",{children:R})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Signing at epoch:"})}),(0,s.jsx)("td",{children:null!=W?W:"?"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Number of signers:"})}),(0,s.jsx)("td",{children:null!==(e=null==O?void 0:O.length)&&void 0!==e?e:0})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Total stakes:"})}),(0,s.jsx)("td",{children:(0,s.jsx)(N.A,{lovelace:null!==(r=null==O?void 0:O.reduce((e,r)=>e+r.stake,0))&&void 0!==r?r:0})})]})]})})}),(0,s.jsx)(h.A,{children:Number.isInteger(R)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{xs:12,sm:12,md:3,lg:2,className:"d-grid mb-1",children:(0,s.jsxs)(S.A,{href:G,disabled:void 0===B||B===R,children:["Current Cardano Epoch (",B,")"]})}),(0,s.jsx)(u.A,{xs:12,sm:12,md:6,lg:4,className:"d-grid mb-1",children:(0,s.jsxs)(f,{children:[(0,s.jsxs)(S.A,{href:z,children:["Previous Registration Epoch (",R-1,")"]}),(0,s.jsxs)(S.A,{href:J,disabled:B<=R,children:["Next Registration Epoch (",R+1,")"]})]})})]})}),j?(0,s.jsx)(v.A,{animation:"grow"}):void 0===O||0===O.length?(0,s.jsxs)(o.A,{variant:"info",children:[(0,s.jsxs)(o.A.Heading,{children:["No registrations for epoch ",R]}),(0,s.jsx)("p",{children:B===R?"The aggregator did not receive registrations yet for the current epoch.":B<R?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,s.jsxs)(h.A,{children:[(0,s.jsxs)(u.A,{xs:12,sm:12,md:7,children:[(0,s.jsx)("h3",{children:"Signers"}),(0,s.jsx)(y.A,{signers:O,displayIndexes:!0})]}),(0,s.jsx)(u.A,{xs:12,sm:12,md:5,children:(0,s.jsxs)(c.A,{gap:3,children:[(0,s.jsx)("h3",{children:"Stakes breakdown"}),(0,s.jsx)(m.yP,{data:F.stakesBreakdown}),(0,s.jsx)("h3",{children:"Signers weight"}),(0,s.jsx)(m.Fq,{data:F.signersWeight})]})})]})]})}p.t1.register(p.Bs,p.PP,p.kc,p.E8,p.hE,p.m_,p.s$),(0,l.W6)(p.t1)},4281:(e,r,t)=>{"use strict";t.d(r,{W6:()=>i,an:()=>n,h1:()=>a});var s=t(6817);function n(e){let r=e=>e/1e12,t=(null!=e?e:[]).map(e=>r(e.stake));return{labels:["< 1M₳","≥ 1M₳ < 10M₳","≥ 10M₳ < 25M₳","≥ 25M₳ < 50M₳","≥ 50M₳ < 75M₳","≥ 75M₳ < 100M₳","≥ 100M₳"],datasets:[{label:"Number of signers",data:[t.filter(e=>e<1).length,t.filter(e=>e>=1&&e<10).length,t.filter(e=>e>=10&&e<25).length,t.filter(e=>e>=25&&e<50).length,t.filter(e=>e>=50&&e<75).length,t.filter(e=>e>=75&&e<100).length,t.filter(e=>e>100).length]}]}}function a(e){let r=null!=e?e:[];return{labels:r.map(e=>e.party_id),datasets:[{label:"Stake (₳)",data:r.map(e=>(0,s.toAda)(e.stake))}]}}function i(e){let r=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],t=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];e.defaults.plugins.legend.display=!1,e.defaults.elements.arc.backgroundColor=r,e.defaults.elements.arc.borderColor=t,e.defaults.elements.arc.borderWidth=1,e.defaults.elements.bar.backgroundColor=r,e.defaults.elements.bar.borderColor=t,e.defaults.elements.bar.borderWidth=1}},2193:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(5155);t(2115);var n=t(7396);function a(e){let{href:r,children:t,className:a,disabled:i,variant:l="primary",...d}=e;return!0===i?a="".concat(a," disabled"):i=!1,(0,s.jsx)(n.default,{href:r,"aria-disabled":i,className:"btn btn-".concat(l," link-underline-opacity-0 ").concat(a),...d,children:t})}},5491:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(5155);t(2115);var n=t(1032),a=t(1334),i=t(2963);function l(e){let{tooltip:r="Raw JSON",color:t="black",...l}=e;return(0,s.jsx)(n.A,{overlay:(0,s.jsx)(a.A,{children:r}),children:(0,s.jsx)(i.A,{variant:"outline-secondary",target:"_blank",...l,children:(0,s.jsx)("i",{className:"bi bi-filetype-json text-".concat(t)})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[647,827,357,839,612,435,441,517,358],()=>r(4338)),_N_E=e.O()}]);